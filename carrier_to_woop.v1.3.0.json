{
  "openapi": "3.0.2",
  "info": {
    "title": "Transporteur vers Woop",
    "description": "Contrat d'interface des APIs des transporteurs vers Woop.\n\n **Version 1.3.0**",
    "version": "1.3.0"
  },
  "servers": [
    {
      "url": "https://car-api.recette.gcp.last-mile.fr",
      "description": "URL de recette"
    },
    {
      "url": "https://car-api.preprod.gcp.last-mile.fr",
      "description": "URL de preprod"
    },
    {
      "url": "https://carrier.last-mile.fr",
      "description": "URL de prod"
    }
  ],
  "paths": {
    "/health": {
      "get": {
        "tags": [
          "Health"
        ],
        "description": "Test si l'API est UP",
        "operationId": "getHealth",
        "responses": {
          "204": {
            "description": "Le service est opérationnel"
          }
        },
        "security": [],
        "summary": "Health"
      }
    },
    "/deliveries/{deliveryId}/status": {
      "put": {
        "description": "Cette méthode permet de mettre à jour le statut d'une livraison.",
        "operationId": "putDeliveryStatus",
        "parameters": [
          {
            "$ref": "#/components/parameters/apiVersion"
          },
          {
            "$ref": "#/components/parameters/pathDeliveryId"
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Contient les informations du nouveau statut de livraison",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "description": "Mise à jour de statut de livraison",
                "properties": {
                  "status": {
                    "$ref": "#/components/schemas/deliveryStatus"
                  },
                  "date": {
                    "type": "string",
                    "format": "datetime",
                    "description": "Date et heure de mise à jour"
                  },
                  "comment": {
                    "type": "string",
                    "description": "Commentaire libre"
                  },
                  "team": {
                    "$ref": "#/components/schemas/team"
                  }
                },
                "required": [
                  "status",
                  "date",
                  "comment"
                ]
              },
              "examples": {
                "Livraison livrée conforme": {
                  "value": {
                    "status": "DELIVERY_DELIVERED_OK",
                    "date": "2019-11-27T10:30:00+0000",
                    "comment": "OK."
                  }
                },
                "Livraison livrée avec conforme avec informations de l'équipe": {
                  "value": {
                    "status": "DELIVERY_DELIVERED_OK",
                    "date": "2019-11-27T10:30:00+0000",
                    "comment": "OK.",
                    "team": {
                      "members": [
                        {
                          "id": "ZER784"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Requête traitée avec succès"
          },
          "400": {
            "description": "Elements manquants et/ou incorrect dans le body",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/badRequest"
                },
                "examples": {
                  "Exemple": {
                    "value": {
                      "reasons": [
                        "Missing argument 'xxxxx'"
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Vous n'êtes pas autorisé à accéder à cet élément."
          },
          "403": {
            "description": "Le statut ne peut plus être edité"
          },
          "404": {
            "description": "Le 'deliveryId' n'a pas été trouvé"
          }
        },
        "security": [
          {
            "oAuth2ClientCredentials": []
          }
        ],
        "summary": "Mise à jour de statut d'une livraison",
        "tags": [
          "Livraison"
        ]
      }
    },
    "/deliveries/{deliveryId}/deltaCosts": {
      "put": {
        "tags": [
          "Livraison"
        ],
        "description": "Cette méthode permet d'ajouter des frais supplémentaire ou de remise sur une livraison",
        "operationId": "putDeliveryDeltaCosts",
        "parameters": [
          {
            "$ref": "#/components/parameters/apiVersion"
          },
          {
            "$ref": "#/components/parameters/pathDeliveryId"
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Contient les informations du delta cost.",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "description": "Frais supplémentaire ou remise",
                "properties": {
                  "amount": {
                    "type": "number",
                    "format": "float",
                    "description": "Montant des frais ou remise"
                  },
                  "reason": {
                    "$ref": "#/components/schemas/deltaCostReason"
                  },
                  "currency": {
                    "$ref": "#/components/schemas/currency"
                  },
                  "comment": {
                    "type": "string",
                    "description": "Commentaire libre"
                  },
                  "date": {
                    "type": "string",
                    "format": "datetime",
                    "description": "Date et heure de l'opération"
                  }
                },
                "required": [
                  "amount",
                  "reason",
                  "currency",
                  "date"
                ]
              },
              "examples": {
                "Frais supplémentaire pour annulation tardive": {
                  "value": {
                    "amount": 165.98,
                    "currency": "EUR",
                    "reason": "DELTACOST_LATE_CANCELLATION",
                    "comment": "Commande annulée 5min avant livraison.",
                    "date": "2019-11-27T10:30:00+0000"
                  }
                },
                "Remise pour livraison partielle": {
                  "value": {
                    "amount": -20,
                    "reason": "DELTACOST_PARTIALLY_DELIVERED",
                    "currency": "EUR",
                    "comment": "Livraison partielle",
                    "date": "2019-11-27T10:30:00+0000"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Requête traitée avec succès"
          },
          "400": {
            "description": "Elements manquants et/ou incorrect dans le body",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/badRequest"
                },
                "examples": {
                  "Exemple": {
                    "value": {
                      "reasons": [
                        "Missing argument 'xxxxx'"
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Vous n'êtes pas autorisé à accéder à cet élément."
          },
          "403": {
            "description": "Des frais supplémentaires ne peuvent plus être envoyés"
          },
          "404": {
            "description": "Le 'deliveryId' n'a pas été trouvé"
          }
        },
        "security": [
          {
            "oAuth2ClientCredentials": []
          }
        ],
        "summary": "Ajout de frais supplémentaire ou de remise d'une livraison"
      }
    },
    "/deliveries/{deliveryId}/closure": {
      "post": {
        "tags": [
          "Livraison"
        ],
        "description": "Cette méthode permet d'ajouter des informations de facturation d'une livraison.",
        "operationId": "postDeliveryClosure",
        "parameters": [
          {
            "$ref": "#/components/parameters/apiVersion"
          },
          {
            "$ref": "#/components/parameters/pathDeliveryId"
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Contient les informations de facturation.",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "description": "Informations de facturation",
                "properties": {
                  "emittedCarbonDioxide": {
                    "$ref": "#/components/schemas/mass"
                  },
                  "billedDistance": {
                    "$ref": "#/components/schemas/length"
                  },
                  "vehicleType": {
                    "$ref": "#/components/schemas/vehicleType"
                  }
                },
                "required": [
                  "emittedCarbonDioxide",
                  "billedDistance",
                  "vehicleType"
                ]
              },
              "examples": {
                "Exemple": {
                  "value": {
                    "emittedCarbonDioxide": {
                      "value": 13.5,
                      "unit": "mg"
                    },
                    "billedDistance": {
                      "value": 5,
                      "unit": "km"
                    },
                    "vehicleType": "VEHICLE_TYPE_SCOOTER"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Requête traitée avec succès"
          },
          "400": {
            "description": "Elements manquants et/ou incorrect dans le body",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/badRequest"
                },
                "examples": {
                  "Exemple": {
                    "value": {
                      "reasons": [
                        "Missing argument 'xxxxx'"
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Vous n'êtes pas autorisé à accéder à cet élément."
          },
          "403": {
            "description": "Des frais supplémentaires ne peuvent plus être envoyés"
          },
          "404": {
            "description": "Le 'deliveryId' n'a pas été trouvé"
          }
        },
        "security": [
          {
            "oAuth2ClientCredentials": []
          }
        ],
        "summary": "Ajout d'informations de facturation d'une livraison"
      }
    },
    "/deliveries/{deliveryId}/events": {
      "post": {
        "tags": [
          "Livraison"
        ],
        "description": "Cette méthode permet de notifier d'un évènement d'une livraison.",
        "operationId": "postDeliveryEvent",
        "parameters": [
          {
            "$ref": "#/components/parameters/apiVersion"
          },
          {
            "$ref": "#/components/parameters/pathDeliveryId"
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Contient les informations de la notification envoyée.",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "description": "Notification",
                "properties": {
                  "status": {
                    "type": "boolean",
                    "description": "'true' si l'évènement est réussi"
                  },
                  "type": {
                    "type": "string",
                    "description": "Type de notification",
                    "enum": [
                      "EVENT_TYPE_SMS",
                      "EVENT_TYPE_MAIL",
                      "EVENT_TYPE_CALL"
                    ]
                  },
                  "date": {
                    "type": "string",
                    "description": "Heure de l'évènement",
                    "format": "datetime"
                  },
                  "subject": {
                    "type": "string",
                    "description": "Sujet de l'évènement",
                    "enum": [
                      "DELIVERY_INIT",
                      "DELIVERY_STARTED",
                      "DELIVERY_PICK_UP_REACHED",
                      "DELIVERY_PICK_UP_OK",
                      "DELIVERY_IN_PROGRESS",
                      "DELIVERY_AT_DROP_OF_LOCATION",
                      "DELIVERY_PICK_UP_FAILED",
                      "DELIVERY_DELIVERED_WITH_CLAIM",
                      "DELIVERY_CANCELLED_WITH_RETURN",
                      "DELIVERY_FAILED_WITH_RETURN",
                      "DELIVERY_RETURNED_TO_PICK_UP",
                      "DELIVERY_DELIVERED_OK",
                      "DELIVERY_CANCELLED"
                    ]
                  },
                  "message": {
                    "type": "string",
                    "description": "Message d'information à propos de l'évènement"
                  },
                  "failReason": {
                    "type": "string",
                    "description": "Raison de l'échec de l'évènement"
                  }
                },
                "required": [
                  "status",
                  "type",
                  "date",
                  "subject",
                  "message"
                ]
              },
              "examples": {
                "Notification d'un sms envoyé au sujet d'un livraison prise en charge": {
                  "value": {
                    "status": true,
                    "type": "EVENT_TYPE_SMS",
                    "date": "2019-11-27T10:30:00+0000",
                    "subject": "DELIVERY_INIT",
                    "message": "Bonjour, votre commande a bien été confirmée."
                  }
                }
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Requête traitée avec succès"
          },
          "400": {
            "description": "Elements manquants et/ou incorrect dans le body",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/badRequest"
                },
                "examples": {
                  "Exemple": {
                    "value": {
                      "reasons": [
                        "Missing argument 'xxxxx'"
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Vous n'êtes pas autorisé à accéder à cet élément."
          },
          "404": {
            "description": "Le 'deliveryId' n'a pas été trouvé"
          }
        },
        "security": [
          {
            "oAuth2ClientCredentials": []
          }
        ],
        "summary": "Ajout d'un évènement d'une livraison"
      }
    },
    "/subscriptions": {
      "post": {
        "description": "Cette méthode permet d'initialiser les souscriptions à nos APIs.\n\nPlus d'informations dans la documentation dédiée \"Souscriptions\"",
        "operationId": "postSubscription",
        "parameters": [
          {
            "$ref": "#/components/parameters/apiVersion"
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Contient les informations de souscriptions",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "description": "Informations de souscriptions",
                "properties": {
                  "callbacks": {
                    "type": "object",
                    "required": [
                      "quote",
                      "delivery",
                      "cancelDelivery"
                    ],
                    "properties": {
                      "quote": {
                        "type": "object",
                        "required": [
                          "url"
                        ],
                        "properties": {
                          "url": {
                            "type": "string",
                            "description": "Url de la route permettant d'obtenir des devis"
                          },
                          "version": {
                            "type": "string",
                            "description": "Version d'API pour ce callback (voir woop vers transporteur)",
                            "example": "1.4.0"
                          }
                        }
                      },
                      "delivery": {
                        "type": "object",
                        "required": [
                          "url"
                        ],
                        "properties": {
                          "url": {
                            "type": "string",
                            "description": "Url de la route permettant de valider un devis"
                          },
                          "version": {
                            "type": "string",
                            "description": "Version d'API pour ce callback (voir woop vers transporteur)",
                            "example": "1.4.0"
                          }
                        }
                      },
                      "cancelDelivery": {
                        "type": "object",
                        "required": [
                          "url"
                        ],
                        "properties": {
                          "url": {
                            "type": "string",
                            "description": "Url de la route permettant d'annuler un ordre de livraison"
                          },
                          "version": {
                            "type": "string",
                            "description": "Version d'API pour ce callback (voir lastmile_to_carrier)",
                            "example": "1.4.0"
                          }
                        }
                      },
                      "cancelQuote": {
                        "type": "object",
                        "properties": {
                          "url": {
                            "type": "string",
                            "description": "Url de la route permettant d'annuler un devis"
                          },
                          "version": {
                            "type": "string",
                            "description": "Version d'API pour ce callback (voir lastmile_to_carrier)",
                            "example": "1.4.0"
                          }
                        },
                        "required": [
                          "url"
                        ]
                      },
                      "score": {
                        "type": "object",
                        "properties": {
                          "url": {
                            "type": "string",
                            "description": "Url de la route permettant de fournir la note du transporteur d'une commande"
                          },
                          "version": {
                            "type": "string",
                            "description": "Version d'API pour ce callback (voir lastmile_to_carrier)",
                            "example": "1.4.0"
                          }
                        }
                      },
                      "pickupPoint": {
                        "type": "object",
                        "properties": {
                          "url": {
                            "type": "string",
                            "description": "Url de la route permettant de fournir la liste des points relais"
                          },
                          "version": {
                            "type": "string",
                            "description": "Version d'API pour ce callback (voir lastmile_to_carrier)",
                            "example": "1.4.0"
                          }
                        },
                        "required": [
                          "url"
                        ]
                      },
                      "price": {
                        "type": "object",
                        "properties": {
                          "url": {
                            "type": "string",
                            "description": "Url de la route permettant de faire une demande de prix"
                          },
                          "version": {
                            "type": "string",
                            "description": "Version d'API pour ce callback (voir lastmile_to_carrier)",
                            "example": "1.4.0"
                          }
                        },
                        "required": [
                          "url"
                        ]
                      },
                      "label": {
                        "type": "object",
                        "properties": {
                          "url": {
                            "type": "string",
                            "description": "Url de la route permettant de générer et récupérer une étiquette"
                          },
                          "version": {
                            "type": "string",
                            "description": "Version d'API pour ce callback (voir lastmile_to_carrier)",
                            "example": "1.4.0"
                          }
                        },
                        "required": [
                          "url"
                        ]
                      },
                      "status": {
                        "type": "object",
                        "properties": {
                          "url": {
                            "type": "string",
                            "description": "Url de la route permettant de récupérer les statuts par 'package'"
                          },
                          "version": {
                            "type": "string",
                            "description": "Version d'API pour ce callback (voir lastmile_to_carrier)",
                            "example": "1.4.0"
                          }
                        },
                        "required": [
                          "url"
                        ]
                      },
                      "update": {
                        "type": "object",
                        "properties": {
                          "url": {
                            "type": "string",
                            "description": "Url de la route permettant de mettre à jour un ordre de livraison"
                          },
                          "version": {
                            "type": "string",
                            "description": "Version d'API pour ce callback (voir lastmile_to_carrier)",
                            "example": "1.4.0"
                          }
                        },
                        "required": [
                          "url"
                        ]
                      }
                    }
                  },
                  "adapter": {
                    "type": "string",
                    "description": "Permet d'indiquer le nom du service utilisé dans LMMP pour convertir le format de données de certaines APIs du Transporteur.",
                    "example": "XMLAdapter"
                  },
                  "headers": {
                    "type": "array",
                    "description": "Liste des headers à envoyés",
                    "items": {
                      "type": "object",
                      "properties": {
                        "key": {
                          "type": "string"
                        },
                        "value": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "key",
                        "value"
                      ]
                    }
                  },
                  "auth": {
                    "oneOf": [
                      {
                        "$ref": "#/components/schemas/postSubscriptionBasic"
                      },
                      {
                        "$ref": "#/components/schemas/postSubscriptionOAuth2"
                      },
                      {
                        "$ref": "#/components/schemas/postSubscriptionToken"
                      }
                    ]
                  }
                },
                "required": [
                  "callbacks"
                ]
              },
              "examples": {
                "Basic": {
                  "value": {
                    "callbacks": {
                      "quote": {
                        "url": "https://my_url/quote",
                        "version": "1.4.0"
                      },
                      "delivery": {
                        "url": "https://my_url/delivery",
                        "version": "1.4.0"
                      },
                      "cancelDelivery": {
                        "url": "https://my_url/cancelDelivery",
                        "version": "1.4.0"
                      },
                      "cancelQuote": {
                        "url": "https://my_url/cancelQuote",
                        "version": "1.4.0"
                      },
                      "score": {
                        "url": "https://my_url/score",
                        "version": "1.4.0"
                      }
                    },
                    "headers": [
                      {
                        "key": "x-api-key",
                        "value": "KHJKO8U9"
                      }
                    ],
                    "auth": {
                      "basic": {
                        "username": "admin",
                        "password": "1234"
                      }
                    }
                  }
                },
                "OAuth2": {
                  "value": {
                    "callbacks": {
                      "quote": {
                        "url": "https://my_url/quote",
                        "version": "1.4.0"
                      },
                      "delivery": {
                        "url": "https://my_url/delivery",
                        "version": "1.4.0"
                      },
                      "cancelDelivery": {
                        "url": "https://my_url/cancelDelivery",
                        "version": "1.4.0"
                      },
                      "cancelQuote": {
                        "url": "https://my_url/cancelQuote",
                        "version": "1.4.0"
                      },
                      "score": {
                        "url": "https://my_url/score",
                        "version": "1.4.0"
                      },
                      "price": {
                        "url": "https://my_url/price",
                        "version": "1.4.0"
                      }
                    },
                    "auth": {
                      "oauth2": {
                        "client_id": "8664fb6e578be877cdd16e2c13e1db3e",
                        "client_secret": "4bb43097953c6d3ffae77b77f4716bba",
                        "audience": "carrier.last-mile.fr",
                        "grant_type": "client_credentials",
                        "tokenEndPoint": "token.last-mile.fr"
                      }
                    }
                  }
                },
                "Token": {
                  "value": {
                    "callbacks": {
                      "quote": {
                        "url": "https://my_url/quote",
                        "version": "1.4.0"
                      },
                      "delivery": {
                        "url": "https://my_url/delivery",
                        "version": "1.4.0"
                      },
                      "cancelDelivery": {
                        "url": "https://my_url/cancelDelivery",
                        "version": "1.4.0"
                      },
                      "cancelQuote": {
                        "url": "https://my_url/cancelQuote",
                        "version": "1.4.0"
                      },
                      "score": {
                        "url": "https://my_url/score",
                        "version": "1.4.0"
                      }
                    },
                    "auth": {
                      "token": {
                        "username": "admin",
                        "password": "1234",
                        "endpoint": "token.last-mile.fr"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Requête traitée avec succès"
          },
          "400": {
            "description": "Elements manquants et/ou incorrect dans le body",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/badRequest"
                },
                "examples": {
                  "Exemple": {
                    "value": {
                      "reasons": [
                        "Missing argument 'xxxxx'"
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Vous n'êtes pas autorisé à accéder à cet élément."
          }
        },
        "security": [
          {
            "oAuth2ClientCredentials": []
          }
        ],
        "summary": "Initialisation des souscriptions",
        "tags": [
          "Souscriptions"
        ]
      }
    },
    "/deliveries/{deliveryId}/documents": {
      "post": {
        "tags": [
          "Document"
        ],
        "description": "Cette méthode permet d'ajouter un document d'une livraison.\n\nTrois types de document sont possible :\n- EVIDENCE : Preuve de livraison.\n- INVOICE : Facture de livraison.\n- CONTRACT: Contrat entre le transporteur et l'enseigne.",
        "operationId": "postDeliveryDocument",
        "parameters": [
          {
            "$ref": "#/components/parameters/apiVersion"
          },
          {
            "$ref": "#/components/parameters/pathDeliveryId"
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Contient les informations du document envoyé au format multipart/form-data.",
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "description": "Informations du document",
                "properties": {
                  "document": {
                    "type": "string",
                    "description": "Le document sour format binaire, max 10mb",
                    "format": "binary"
                  },
                  "type": {
                    "type": "string",
                    "description": "Type de document",
                    "enum": [
                      "EVIDENCE",
                      "INVOICE",
                      "CONTRACT"
                    ]
                  },
                  "date": {
                    "type": "string",
                    "description": "Date de création du document",
                    "format": "datetime"
                  }
                },
                "required": [
                  "document",
                  "type",
                  "date"
                ]
              },
              "examples": {
                "Preuve de livraison": {
                  "value": "{\n  \"document\": \"{file stream}\",\n  \"type\": \"EVIDENCE\",\n  \"date\": \"2019-11-27T10:30:00+0000\"\n}"
                }
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Requête traitée avec succès"
          },
          "400": {
            "description": "Elements manquants et/ou incorrect dans le body",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/badRequest"
                },
                "examples": {
                  "Exemple": {
                    "value": {
                      "reasons": [
                        "Missing argument 'xxxxx'"
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Vous n'êtes pas autorisé à accéder à cet élément."
          },
          "404": {
            "description": "Le 'deliveryId' n'a pas été trouvé"
          }
        },
        "security": [
          {
            "oAuth2ClientCredentials": []
          }
        ],
        "summary": "Ajout d'un document d'une livraison"
      }
    }
  },
  "components": {
    "schemas": {
      "currency": {
        "type": "string",
        "enum": [
          "EUR"
        ],
        "description": "Devise",
        "title": "Devise (currency)",
        "x-examples": {
          "Exemple": "EUR"
        }
      },
      "deliveryStatus": {
        "type": "string",
        "enum": [
          "DELIVERY_STARTED",
          "DELIVERY_PICK_UP_REACHED",
          "DELIVERY_PICK_UP_OK",
          "DELIVERY_PICK_UP_PARTIALLY",
          "DELIVERY_IN_PROGRESS",
          "DELIVERY_AT_DROP_OF_LOCATION",
          "DELIVERY_PICK_UP_FAILED",
          "DELIVERY_DELIVERED_WITH_CLAIM",
          "DELIVERY_CANCELLED_WITH_RETURN",
          "DELIVERY_FAILED_WITH_RETURN",
          "DELIVERY_RETURNED_TO_PICK_UP",
          "DELIVERY_DELIVERED_OK",
          "DELIVERY_DELIVERED_PARTIALLY"
        ],
        "description": "Statut de livraison",
        "title": "Statut de livraison (deliveryStatus)",
        "x-examples": {
          "Exemple": "DELIVERY_STARTED"
        }
      },
      "deltaCostReason": {
        "type": "string",
        "enum": [
          "DELTACOST_EXTEND_WAITING_WAREHOUSE",
          "DELTACOST_EXTEND_WAITING_CUSTOMER",
          "DELTACOST_WRONG_FLOOR",
          "DELTACOST_WRONG_CONTENT",
          "DELTACOST_WAREHOUSE_RETURN",
          "DELTACOST_LATE_CANCELLATION",
          "DELTACOST_PICKUP_FAILED",
          "DELTACOST_PARTIALLY_DELIVERED",
          "DELTACOST_UNKNOWN"
        ],
        "title": "Raison de frais supplémentaire ou remise (deltaCostReason)",
        "description": "Raison de frais supplémentaire ou remise",
        "x-examples": {
          "Exemple": "DELTACOST_EXTEND_WAITING_WAREHOUSE"
        }
      },
      "length": {
        "required": [
          "value",
          "unit"
        ],
        "properties": {
          "value": {
            "type": "number",
            "format": "float"
          },
          "unit": {
            "$ref": "#/components/schemas/lengthUnits"
          }
        },
        "title": "Dimension (length)",
        "description": "Dimension",
        "x-examples": {
          "Exemple": {
            "value": 300,
            "unit": "mm"
          }
        }
      },
      "mass": {
        "required": [
          "value",
          "unit"
        ],
        "properties": {
          "value": {
            "type": "number",
            "format": "float"
          },
          "unit": {
            "$ref": "#/components/schemas/massUnits"
          }
        },
        "title": "Poids (mass)",
        "description": "Poids",
        "x-examples": {
          "Exemple": {
            "value": 1,
            "unit": "kg"
          }
        }
      },
      "lengthUnits": {
        "type": "string",
        "enum": [
          "mm",
          "cm",
          "m",
          "km",
          "in",
          "ft-us",
          "ft",
          "mi"
        ],
        "title": "Unité de mesure (lengthUnits)",
        "description": "Unité de mesure",
        "x-examples": {
          "Exemple": "mm"
        }
      },
      "massUnits": {
        "type": "string",
        "enum": [
          "mcg",
          "mg",
          "g",
          "kg",
          "oz",
          "lb",
          "mt",
          "t"
        ],
        "title": "Unité de poids (massUnits)",
        "description": "Unité de poids",
        "x-examples": {
          "Exemple": "mcg"
        }
      },
      "postSubscriptionBasic": {
        "properties": {
          "basic": {
            "type": "object",
            "description": "A definir si la méthode d'authentification à l'API voulue est basic",
            "required": [
              "username",
              "password"
            ],
            "properties": {
              "username": {
                "type": "string"
              },
              "password": {
                "type": "string"
              }
            }
          }
        },
        "title": "Authentification Basic (postSubscriptionBasic)",
        "description": "Authentification souscription Basic",
        "x-examples": {
          "Exemple": {
            "basic": {
              "username": "username",
              "password": "password"
            }
          }
        }
      },
      "postSubscriptionOAuth2": {
        "properties": {
          "oauth2": {
            "type": "object",
            "description": "A definir si la méthode d'authentification à l'API voulue est oauth2",
            "required": [
              "client_id",
              "client_secret",
              "tokenEndPoint"
            ],
            "properties": {
              "client_id": {
                "type": "string"
              },
              "client_secret": {
                "type": "string"
              },
              "audience": {
                "type": "string"
              },
              "grant_type": {
                "type": "string"
              },
              "tokenEndPoint": {
                "type": "string",
                "description": "Url permettant de recupérer le token d'accès en fonction du clientId et du clientSecret"
              }
            }
          }
        },
        "title": "Authentification oauth2 (postSubscriptionOauth2)",
        "description": "Authentification souscription oauth2 ",
        "x-examples": {
          "Exemple": {
            "oauth2": {
              "client_id": "XXXX",
              "client_secret": "XXXX",
              "audience": "XXXX",
              "grant_type": "client_credentials",
              "tokenEndPoint": "https://my-token-url.com"
            }
          }
        }
      },
      "postSubscriptionToken": {
        "properties": {
          "token": {
            "type": "object",
            "description": "A définir si la méthode d'authentification donne un bearer token à partir d'un username/password",
            "required": [
              "username",
              "password",
              "endpoint"
            ],
            "properties": {
              "username": {
                "type": "string"
              },
              "password": {
                "type": "string"
              },
              "endpoint": {
                "type": "string",
                "description": "Url permettant de recupérer le token d'accès"
              }
            }
          }
        },
        "title": "Authentification token (postSubscriptionOauth2)",
        "description": "Authentification souscription token",
        "x-examples": {
          "Exemple": {
            "token": {
              "username": "username",
              "password": "password",
              "endpoint": "https://my-token-url.com"
            }
          }
        }
      },
      "team": {
        "required": [
          "members"
        ],
        "properties": {
          "members": {
            "type": "array",
            "items": {
              "required": [
                "id"
              ],
              "properties": {
                "id": {
                  "type": "string"
                }
              }
            }
          }
        },
        "title": "Équipe (team)",
        "description": "Informations de l'équipe ayant contribué à la livraison",
        "x-examples": {
          "Exemple": {
            "members": [
              {
                "id": "5643JK"
              }
            ]
          }
        }
      },
      "vehicleType": {
        "type": "string",
        "enum": [
          "VEHICLE_TYPE_BIKE",
          "VEHICLE_TYPE_SCOOTER",
          "VEHICLE_TYPE_E_SCOOTER",
          "VEHICLE_TYPE_VAN_SMALL",
          "VEHICLE_TYPE_E_VAN_SMALL",
          "VEHICLE_TYPE_VAN_MEDIUM",
          "VEHICLE_TYPE_PEDESTRIAN",
          "VEHICLE_TYPE_TRUCK",
          "VEHICLE_TYPE_VAN_BIG",
          "VEHICLE_TYPE_E_VAN_BIG",
          "VEHICLE_TYPE_BIKE_CARGO",
          "VEHICLE_TYPE_CAR",
          "VEHICLE_TYPE_E_CAR",
          "VEHICLE_TYPE_UNKNOWN"
        ],
        "title": "Type de véhicule (vehicleType)",
        "description": "Type de véhicule",
        "x-examples": {
          "Exemple": "VEHICLE_TYPE_BIKE"
        }
      },
      "badRequest": {
        "type": "object",
        "properties": {
          "reasons": {
            "type": "array",
            "items": {
              "type": "string",
              "example": "Missing argument 'xxxxx'"
            }
          }
        },
        "description": "Elements manquants et/ou incorrect dans le body",
        "title": "Erreur 400 (badRequest)",
        "x-examples": {
          "Exemple": {
            "reasons": [
              "Missing argument 'xxxxx'"
            ]
          }
        }
      }
    },
    "parameters": {
      "apiVersion": {
        "in": "header",
        "name": "x-api-version",
        "required": false,
        "schema": {
          "type": "string",
          "example": "1.3.0"
        }
      },
      "pathDeliveryId": {
        "in": "path",
        "name": "deliveryId",
        "required": true,
        "schema": {
          "type": "string",
          "description": "Id de livraison"
        }
      }
    },
    "securitySchemes": {
      "oAuth2ClientCredentials": {
        "type": "oauth2",
        "flows": {
          "clientCredentials": {
            "tokenUrl": "https://last-mile.eu.auth0.com/oauth/token",
            "x-google-issuer": "https://last-mile.eu.auth0.com/",
            "x-google-jwks_uri": "https://last-mile.eu.auth0.com/.well-known/jwks.json",
            "x-google-audiences": "https://carrier.api.meltingpoint.fr/"
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "Livraison"
    },
    {
      "name": "Health"
    },
    {
      "name": "Document"
    },
    {
      "name": "Souscriptions"
    }
  ]
}