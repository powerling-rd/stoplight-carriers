{
  "openapi": "3.0.2",
  "info": {
    "title": "Woop vers Transporteur",
    "description": "Contrat d'interface des APIs de Woop vers les transporteurs.\nVersion 1.4.1",
    "version": "1.4.1"
  },
  "paths": {
    "/quotes": {
      "post": {
        "tags": [
          "Devis"
        ],
        "description": "Cette méthode permet d'effectuer une demande de devis auprès du transporteur. Si le devis est validé, les informations transmises seront utilisées lors de la création de l'expédition à l'aide du POST /deliveries. ",
        "operationId": "postQuote",
        "requestBody": {
          "required": true,
          "description": "Contient les informations nécessaire à la création d'un devis de livraison. ",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/postQuote"
              },
              "examples": {
                "Exemple par défaut": {
                  "value": {
                    "orderId": "65zq1d5qz1d56q1",
                    "referenceNumber": "65zq1d5qz1d56q1-456",
                    "retailer": {
                      "name": "Enseigne A",
                      "id": "ret123",
                      "store": {
                        "id": "store123",
                        "name": "Magasin C",
                        "contact": {
                          "firstName": "Pierre",
                          "lastName": "Dupond",
                          "phone": "+33600000000",
                          "email": "pierre.dupond@mail.fr"
                        }
                      }
                    },
                    "picking": {
                      "address": {
                        "addressLine1": "179 Boulevard de Turin",
                        "addressLine2": "",
                        "postalCode": "59000",
                        "city": "Lille",
                        "country": "FR"
                      },
                      "infos": "Travaux sur le boulevard.",
                      "interval": [
                        {
                          "start": "2019-12-04T12:30:00+0000",
                          "end": "2019-12-04T13:30:00+0000"
                        }
                      ]
                    },
                    "delivery": {
                      "address": {
                        "addressLine1": "165 avenue de Bretagne",
                        "addressLine2": "Euratech - EuraTechnologies",
                        "elevator": true,
                        "floor": 2,
                        "postalCode": "59000",
                        "city": "Lille",
                        "country": "FR"
                      },
                      "interval": [
                        {
                          "start": "2019-12-06T13:00:00+0000",
                          "end": "2019-12-06T15:00:00+0000"
                        }
                      ]
                    },
                    "packages": [
                      {
                        "length": {
                          "value": 121.8,
                          "unit": "cm"
                        },
                        "width": {
                          "value": 77.5,
                          "unit": "cm"
                        },
                        "height": {
                          "value": 55,
                          "unit": "cm"
                        },
                        "weight": {
                          "value": 33.4,
                          "unit": "kg"
                        },
                        "products": [
                          {
                            "type": "TYPOLOGY_GENERIC",
                            "ean": "4897567123548",
                            "cug": "e21fe21",
                            "label": "Produit label 1",
                            "quantity": 1
                          }
                        ],
                        "quantity": 2
                      }
                    ],
                    "services": [
                      "SERVICE_SELECTED_ROOM"
                    ]
                  }
                },
                "Exemple avec le prix des produits": {
                  "value": {
                    "orderId": "65zq1d5qz1d56q1",
                    "referenceNumber": "65zq1d5qz1d56q1-456",
                    "retailer": {
                      "name": "Enseigne A",
                      "id": "ret123",
                      "store": {
                        "id": "store123",
                        "name": "Magasin C",
                        "contact": {
                          "firstName": "Pierre",
                          "lastName": "Dupond",
                          "phone": "+33600000000",
                          "email": "pierre.dupond@mail.fr"
                        }
                      }
                    },
                    "picking": {
                      "address": {
                        "addressLine1": "179 Boulevard de Turin",
                        "addressLine2": "",
                        "postalCode": "59000",
                        "city": "Lille",
                        "country": "FR"
                      },
                      "infos": "Travaux sur le boulevard.",
                      "interval": [
                        {
                          "start": "2019-12-04T12:30:00+0000",
                          "end": "2019-12-04T13:30:00+0000"
                        }
                      ]
                    },
                    "delivery": {
                      "address": {
                        "addressLine1": "165 avenue de Bretagne",
                        "addressLine2": "Euratech - EuraTechnologies",
                        "elevator": true,
                        "floor": 2,
                        "postalCode": "59000",
                        "city": "Lille",
                        "country": "FR"
                      },
                      "interval": [
                        {
                          "start": "2019-12-06T13:00:00+0000",
                          "end": "2019-12-06T15:00:00+0000"
                        }
                      ]
                    },
                    "packages": [
                      {
                        "length": {
                          "value": 121.8,
                          "unit": "cm"
                        },
                        "width": {
                          "value": 77.5,
                          "unit": "cm"
                        },
                        "height": {
                          "value": 55,
                          "unit": "cm"
                        },
                        "weight": {
                          "value": 33.4,
                          "unit": "kg"
                        },
                        "products": [
                          {
                            "type": "TYPOLOGY_GENERIC",
                            "ean": "4897567123548",
                            "cug": "e21fe21",
                            "label": "Produit label 1",
                            "quantity": 1
                          }
                        ],
                        "quantity": 2
                      }
                    ],
                    "services": [
                      "SERVICE_SELECTED_ROOM",
                      "SERVICE_ASSEMBLY"
                    ],
                    "productsPrice": {
                      "value": 30,
                      "currency": "EUR"
                    }
                  }
                },
                "Exemple avec tags": {
                  "value": {
                    "orderId": "65zq1d5qz1d56q1",
                    "referenceNumber": "65zq1d5qz1d56q1-456",
                    "retailer": {
                      "name": "Enseigne A",
                      "id": "ret123",
                      "store": {
                        "id": "store123",
                        "name": "Magasin C",
                        "contact": {
                          "firstName": "Pierre",
                          "lastName": "Dupond",
                          "phone": "+33600000000",
                          "email": "pierre.dupond@mail.fr"
                        }
                      }
                    },
                    "picking": {
                      "address": {
                        "addressLine1": "179 Boulevard de Turin",
                        "addressLine2": "",
                        "postalCode": "59000",
                        "city": "Lille",
                        "country": "FR"
                      },
                      "infos": "Travaux sur le boulevard.",
                      "interval": [
                        {
                          "start": "2019-12-04T12:30:00+0000",
                          "end": "2019-12-04T13:30:00+0000"
                        }
                      ]
                    },
                    "delivery": {
                      "address": {
                        "addressLine1": "165 avenue de Bretagne",
                        "addressLine2": "Euratech - EuraTechnologies",
                        "elevator": true,
                        "floor": 2,
                        "postalCode": "59000",
                        "city": "Lille",
                        "country": "FR"
                      },
                      "interval": [
                        {
                          "start": "2019-12-06T13:00:00+0000",
                          "end": "2019-12-06T15:00:00+0000"
                        }
                      ]
                    },
                    "packages": [
                      {
                        "length": {
                          "value": 121.8,
                          "unit": "cm"
                        },
                        "width": {
                          "value": 77.5,
                          "unit": "cm"
                        },
                        "height": {
                          "value": 55,
                          "unit": "cm"
                        },
                        "weight": {
                          "value": 33.4,
                          "unit": "kg"
                        },
                        "products": [
                          {
                            "type": "TYPOLOGY_GENERIC",
                            "ean": "4897567123548",
                            "cug": "e21fe21",
                            "label": "Produit label 1",
                            "quantity": 1
                          }
                        ],
                        "quantity": 2
                      }
                    ],
                    "services": [
                      "SERVICE_SELECTED_ROOM"
                    ],
                    "tags": [
                      {
                        "key": "origin",
                        "value": "web"
                      }
                    ]
                  }
                }
              }
            },
            "application/xml": {
              "schema": {
                "type": "object",
                "properties": {}
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Code succès, les devis ont été générés pour la commande. Tous les transporteurs solicités possèdent un identifiant de devis pour accepter la livraison.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/quote"
                  }
                },
                "examples": {
                  "Exemple": {
                    "value": [
                      {
                        "quoteId": "4zd5z4d5zd",
                        "price": {
                          "value": 135.56,
                          "currency": "EUR"
                        },
                        "vehicleType": "VEHICLE_TYPE_BIKE"
                      }
                    ]
                  }
                }
              }
            }
          },
          "202": {
            "description": "La demande de devis a été traitée. Actuellement, aucun devis n'a été généré.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "reasons"
                  ],
                  "properties": {
                    "reasons": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/refusedReason"
                      }
                    },
                    "comment": {
                      "type": "string"
                    }
                  }
                },
                "examples": {
                  "Exemple": {
                    "value": {
                      "reasons": [
                        "REFUSED_TOO_HEAVY"
                      ],
                      "comment": "C'est trop lourd !"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Des élèments sont manquants et/ou incorrect dans le body. ",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "reasons": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "example": "Missing argument 'xxxxx'"
                      }
                    }
                  }
                },
                "examples": {
                "Exemple": {
                  "value": {
                    "reasons": [
                      "Missing argument 'xxxxx'"
                    ]
                  }
                }
              }
              }
            }
          }
        },
        "summary": "Demande de devis"
      }
    },
    "/quotes/{quoteId}": {
      "delete": {
        "tags": [
          "Devis"
        ],
        "description": "Cette méthode permet d'annuler une demande de devis auprès de tous les transporteur. Si le devis est déjà validé par un transporteur, la demande d'annulation sera rejetée. ",
        "operationId": "deleteQuote",
        "parameters": [
          {
            "$ref": "#/components/parameters/pathQuoteId"
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "quoteId",
            "required": true,
            "description": "Identifiant unique du devis pour la livraison"
          }
        ],
        "responses": {
          "403": {
            "description": "Le devis ne peut pas/plus être annulé"
          },
          "404": {
            "description": "L'identifiant du devis quoteId n'existe pas"
          }
        },
        "summary": "Annulation d'un devis"
      },
      "parameters": [
        {
          "schema": {
            "type": "string"
          },
          "name": "quoteId",
          "in": "path",
          "required": true,
          "description": "Numéro de devis"
        }
      ]
    },
    "/deliveries": {
      "post": {
        "operationId": "postDelivery",
        "description": "Valide un devis et confirme l'ordre de livraison en fournissant les informations supplémentaires de livraison.",
        "requestBody": {
          "required": true,
          "description": "Contient les informations de la demande de livraison.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/postDelivery"
              },
              "examples": {
                "Exemple par défaut": {
                  "value": {
                    "orderId": "65zq1d5qz1d56q1",
                    "quoteId": "4zd5z4d5zd",
                    "referenceNumber": "65zq1d5qz1d56q1-456",
                    "retailer": {
                      "name": "Enseigne A",
                      "id": "ret123",
                      "store": {
                        "id": "store123",
                        "name": "Magasin C",
                        "contact": {
                          "firstName": "Pierre",
                          "lastName": "Dupond",
                          "phone": "+33600000000",
                          "email": "pierre.dupond@mail.fr"
                        }
                      }
                    },
                    "picking": {
                      "contact": {
                        "firstName": "Michel",
                        "lastName": "Dupont",
                        "phone": "+33600000000",
                        "email": "michel.dupont@mail.fr"
                      },
                      "address": {
                        "addressLine1": "237 rue du Ballon",
                        "addressLine2": "Niji",
                        "postalCode": "59110",
                        "city": "La Madeleine",
                        "country": "FR"
                      },
                      "infos": "Travaux en ce moment attention.",
                      "interval": [
                        {
                          "start": "2019-12-04T12:30:00+0000",
                          "end": "2019-12-04T13:30:00+0000"
                        }
                      ]
                    },
                    "delivery": {
                      "contact": {
                        "firstName": "John",
                        "lastName": "Doe",
                        "phone": "+33600000000",
                        "email": "john.doe@mail.fr",
                        "language": "fr-FR",
                        "timezone": "Europe/Paris"
                      },
                      "address": {
                        "addressLine1": "165 avenue de Bretagne",
                        "elevator": true,
                        "floor": 2,
                        "postalCode": "59000",
                        "city": "Lille",
                        "country": "FR"
                      },
                      "interval": [
                        {
                          "start": "2019-12-06T13:00:00+0000",
                          "end": "2019-12-06T15:00:00+0000"
                        }
                      ]
                    },
                    "packages": [
                      {
                        "length": {
                          "value": 15,
                          "unit": "cm"
                        },
                        "width": {
                          "value": 35.5,
                          "unit": "cm"
                        },
                        "height": {
                          "value": 1.25,
                          "unit": "m"
                        },
                        "weight": {
                          "value": 12.35,
                          "unit": "kg"
                        },
                        "products": [
                          {
                            "type": "TYPOLOGY_GENERIC",
                            "ean": "4897567123548",
                            "cug": "e21fe21",
                            "label": "Armoire",
                            "quantity": 1
                          }
                        ],
                        "reference": "1234A",
                        "quantity": 1
                      }
                    ],
                    "services": [
                      "SERVICE_SELECTED_ROOM"
                    ]
                  }
                },
                "Exemple avec le prix des produits": {
                  "value": {
                    "orderId": "65zq1d5qz1d56q1",
                    "quoteId": "4zd5z4d5zd",
                    "referenceNumber": "65zq1d5qz1d56q1-456",
                    "retailer": {
                      "name": "Enseigne A",
                      "id": "ret123",
                      "store": {
                        "id": "store123",
                        "name": "Magasin C",
                        "contact": {
                          "firstName": "Pierre",
                          "lastName": "Dupond",
                          "phone": "+33600000000",
                          "email": "pierre.dupond@mail.fr"
                        }
                      }
                    },
                    "picking": {
                      "contact": {
                        "firstName": "Michel",
                        "lastName": "Dupont",
                        "phone": "+33600000000",
                        "email": "michel.dupont@mail.fr"
                      },
                      "address": {
                        "addressLine1": "237 rue du Ballon",
                        "addressLine2": "Niji",
                        "postalCode": "59110",
                        "city": "La Madeleine",
                        "country": "FR"
                      },
                      "infos": "Travaux en ce moment attention.",
                      "interval": [
                        {
                          "start": "2019-12-04T12:30:00+0000",
                          "end": "2019-12-04T13:30:00+0000"
                        }
                      ]
                    },
                    "delivery": {
                      "contact": {
                        "firstName": "John",
                        "lastName": "Doe",
                        "phone": "+33600000000",
                        "email": "john.doe@mail.fr"
                      },
                      "address": {
                        "addressLine1": "165 avenue de Bretagne",
                        "elevator": true,
                        "floor": 2,
                        "postalCode": "59000",
                        "city": "Lille",
                        "country": "FR"
                      },
                      "interval": [
                        {
                          "start": "2019-12-06T13:00:00+0000",
                          "end": "2019-12-06T15:00:00+0000"
                        }
                      ]
                    },
                    "packages": [
                      {
                        "length": {
                          "value": 15,
                          "unit": "cm"
                        },
                        "width": {
                          "value": 35.5,
                          "unit": "cm"
                        },
                        "height": {
                          "value": 1.25,
                          "unit": "m"
                        },
                        "weight": {
                          "value": 12.35,
                          "unit": "kg"
                        },
                        "products": [
                          {
                            "type": "TYPOLOGY_GENERIC",
                            "ean": "4897567123548",
                            "cug": "e21fe21",
                            "label": "Armoire",
                            "quantity": 1
                          }
                        ],
                        "quantity": 2
                      }
                    ],
                    "services": [
                      "SERVICE_SELECTED_ROOM",
                      "SERVICE_ASSEMBLY"
                    ],
                    "productsPrice": {
                      "value": 30,
                      "currency": "EUR"
                    }
                  }
                },
                "Exemple avec tags": {
                  "value": {
                    "orderId": "65zq1d5qz1d56q1",
                    "quoteId": "4zd5z4d5zd",
                    "referenceNumber": "65zq1d5qz1d56q1-456",
                    "retailer": {
                      "name": "Enseigne A",
                      "id": "ret123",
                      "store": {
                        "id": "store123",
                        "name": "Magasin C",
                        "contact": {
                          "firstName": "Pierre",
                          "lastName": "Dupond",
                          "phone": "+33600000000",
                          "email": "pierre.dupond@mail.fr"
                        }
                      }
                    },
                    "picking": {
                      "contact": {
                        "firstName": "Michel",
                        "lastName": "Dupont",
                        "phone": "+33600000000",
                        "email": "michel.dupont@mail.fr"
                      },
                      "address": {
                        "addressLine1": "237 rue du Ballon",
                        "addressLine2": "Niji",
                        "postalCode": "59110",
                        "city": "La Madeleine",
                        "country": "FR"
                      },
                      "infos": "Travaux en ce moment attention.",
                      "interval": [
                        {
                          "start": "2019-12-04T12:30:00+0000",
                          "end": "2019-12-04T13:30:00+0000"
                        }
                      ]
                    },
                    "delivery": {
                      "contact": {
                        "firstName": "John",
                        "lastName": "Doe",
                        "phone": "+33600000000",
                        "email": "john.doe@mail.fr",
                        "language": "fr-FR",
                        "timezone": "Europe/Paris"
                      },
                      "address": {
                        "addressLine1": "165 avenue de Bretagne",
                        "elevator": true,
                        "floor": 2,
                        "postalCode": "59000",
                        "city": "Lille",
                        "country": "FR"
                      },
                      "interval": [
                        {
                          "start": "2019-12-06T13:00:00+0000",
                          "end": "2019-12-06T15:00:00+0000"
                        }
                      ]
                    },
                    "packages": [
                      {
                        "length": {
                          "value": 15,
                          "unit": "cm"
                        },
                        "width": {
                          "value": 35.5,
                          "unit": "cm"
                        },
                        "height": {
                          "value": 1.25,
                          "unit": "m"
                        },
                        "weight": {
                          "value": 12.35,
                          "unit": "kg"
                        },
                        "products": [
                          {
                            "type": "TYPOLOGY_GENERIC",
                            "ean": "4897567123548",
                            "cug": "e21fe21",
                            "label": "Armoire",
                            "quantity": 1
                          }
                        ],
                        "reference": "1234A",
                        "quantity": 1
                      }
                    ],
                    "services": [
                      "SERVICE_SELECTED_ROOM"
                    ],
                    "tags": [
                      {
                        "key": "origin",
                        "value": "web"
                      }
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "La livraison est acceptée, un 'deliveryId' est retourné, additionnellement un tableau d'id de 'packages' peut être retourné en cas de tracking par colis.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/deliveryCreated"
                    },
                    {
                      "$ref": "#/components/schemas/deliveryCreatedPackages"
                    },
                    {
                      "$ref": "#/components/schemas/deliveryCreatedReference"
                    }
                  ]
                },
                "examples": {
                  "Exemple par défaut": {
                    "value": {
                      "deliveryId": "5q4f5q4zd"
                    }
                  },
                  "Exemple avec suivi de colis": {
                    "value": {
                      "deliveryId": "5q4f5q4zd",
                      "packages": [
                        {
                          "id": "pack123"
                        }
                      ]
                    }
                  },
                  "Exemple avec référence de livraison": {
                    "value": {
                      "deliveryId": "5q4f5q4zd",
                      "externalReference": "12254-AX"
                    }
                  }
                }
              }
            }
          },
          "205": {
            "description": "La livraison est finalement refusée, les raisons sont retournées.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "reasons": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/refusedReason"
                      }
                    },
                    "comment": {
                      "type": "string"
                    }
                  }
                },
                "examples": {
                  "Exemple": {
                    "value": {
                      "reasons": [
                        "REFUSED_TOO_HEAVY"
                      ],
                      "comment": "Finalement je ne prends pas cette livraison."
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Elements manquants et/ou incorrect dans le body",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "reasons": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "example": "Missing argument 'xxxxx'"
                      }
                    }
                  }
                },
                "examples": {
                "Exemple": {
                  "value": {
                    "reasons": [
                      "Missing argument 'xxxxx'"
                    ]
                  }
                }
              }
              }
            }
          }
        },
        "tags": [
          "Livraison"
        ],
        "summary": "Demande de livraison"
      }
    },
    "/deliveries/{deliveryId}": {
      "delete": {
        "tags": [
          "Livraison"
        ],
        "description": "Annulation d'une livraison.",
        "operationId": "deleteDelivery",
        "parameters": [
          {
            "$ref": "#/components/parameters/pathDeliveryId"
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Contient les informations sur le refus de la livraison.",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "reasons",
                  "comment"
                ],
                "properties": {
                  "reasons": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/cancelledReason"
                    }
                  },
                  "comment": {
                    "type": "string"
                  }
                }
              },
              "examples": {
                "Exemple": {
                  "value": {
                    "reasons": [
                      "CANCELLED_CANNOT_SERVICE"
                    ],
                    "comment": "En fait non."
                  }
                }
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Requête traitée avec succès"
          },
          "400": {
            "description": "Elements manquants et/ou incorrect dans le body",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "reasons": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "example": "Missing argument 'xxxxx'"
                      }
                    }
                  }
                },
                "examples": {
                "Exemple": {
                  "value": {
                    "reasons": [
                      "Missing argument 'xxxxx'"
                    ]
                  }
                }
              }
              }
            }
          },
          "403": {
            "description": "La commande ne peut être annulée",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "reasons": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "comment": {
                      "type": "string"
                    }
                  }
                },
                "examples": {
                  "Exemple": {
                    "value": {
                      "reasons": [
                        "Missing argument 'xxxxx'"
                      ],
                      "comment": "C'est trop tard !"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Le 'deliveryId' n'existe pas"
          }
        },
        "summary": "Annulation d'une livraison"
      },
      "patch": {
        "tags": [
          "Livraison"
        ],
        "description": "Mise à jour d'une livraison",
        "operationId": "patchDelivery",
        "parameters": [
          {
            "$ref": "#/components/parameters/pathDeliveryId"
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Contient les informations de mise à jour d'une livraison.",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "picking": {
                    "required": [
                      "address",
                      "interval",
                      "contact"
                    ],
                    "properties": {
                      "address": {
                        "$ref": "#/components/schemas/address"
                      },
                      "infos": {
                        "type": "string"
                      },
                      "interval": {
                        "type": "array",
                        "items": {
                          "$ref": "#/components/schemas/interval"
                        }
                      },
                      "contact": {
                        "$ref": "#/components/schemas/contact"
                      }
                    }
                  },
                  "delivery": {
                    "required": [
                      "address",
                      "interval",
                      "contact"
                    ],
                    "properties": {
                      "address": {
                        "$ref": "#/components/schemas/address"
                      },
                      "infos": {
                        "type": "string"
                      },
                      "interval": {
                        "type": "array",
                        "items": {
                          "$ref": "#/components/schemas/interval"
                        }
                      },
                      "contact": {
                        "$ref": "#/components/schemas/contact"
                      }
                    }
                  },
                  "packages": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/package"
                    }
                  },
                  "services": {
                    "$ref": "#/components/schemas/services"
                  }
                }
              },
              "examples": {
                "Exemple": {
                  "value": {
                    "picking": {
                      "contact": {
                        "firstName": "John",
                        "lastName": "Doe",
                        "phone": "+33600000000",
                        "email": "john.doe@mail.fr",
                        "language": "fr-FR",
                        "timezone": "Europe/Paris"
                      },
                      "address": {
                        "addressLine1": "165 avenue de Bretagne",
                        "elevator": true,
                        "floor": 2,
                        "postalCode": "59000",
                        "city": "Lille",
                        "country": "FR"
                      },
                      "interval": [
                        {
                          "start": "2019-12-04T12:30:00+0000",
                          "end": "2019-12-04T13:30:00+0000"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Requête traitée avec succès."
          },
          "401": {
            "description": "Vous n'êtes pas autorisé à accéder à cet élément."
          },
          "403": {
            "description": "La commande ne peut être modifiée",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "reasons": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "comment": {
                      "type": "string"
                    }
                  }
                },
                "examples": {
                  "Exemple": {
                    "value": {
                      "reasons": [
                        "Missing argument 'xxxxx'"
                      ],
                      "comment": "C'est trop tard !"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Mise à jour d'une livraison"
      }
    },
    "/deliveries/{deliveryId}/score": {
      "put": {
        "tags": [
          "Livraison"
        ],
        "description": "Notification d'une nouvelle note d'une livraison",
        "operationId": "putDeliveryScore",
        "parameters": [
          {
            "$ref": "#/components/parameters/pathDeliveryId"
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Contient la note client.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/notation"
              },
              "examples": {
                "Exemple": {
                  "value": {
                    "score": [
                      {
                        "note": 9,
                        "type": "SCORE_TYPE_RECOMMENDATION"
                      }
                    ],
                    "comment": "Je recommande à 200% !"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Requête traitée avec succès"
          },
          "400": {
            "description": "Elements manquants et/ou incorrect dans le body",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "reasons": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "example": "Missing argument 'xxxxx'"
                      }
                    }
                  }
                },
                "examples": {
                "Exemple": {
                  "value": {
                    "reasons": [
                      "Missing argument 'xxxxx'"
                    ]
                  }
                }
              }
              }
            }
          },
          "404": {
            "description": "Le 'deliveryId' n'existe pas"
          }
        },
        "summary": "Ajout d'une note d'une livraison"
      }
    }
  },
  "components": {
    "schemas": {
      "address": {
        "x-examples": {
          "example-1": {
            "addressLine1": "string",
            "addressLine2": "string",
            "elevator": true,
            "floor": 0,
            "postalCode": "string",
            "doorCode": "string",
            "city": "string",
            "district": "string",
            "country": "FR",
            "comment": "string"
          }
        },
        "type": "object",
        "properties": {
          "addressLine1": {
            "type": "string",
            "description": "Adresse complète du lieu principal"
          },
          "addressLine2": {
            "type": "string",
            "description": "Adresse complémentaire du lieu"
          },
          "elevator": {
            "type": "boolean",
            "description": "Indique si l’adresse possède un ascenseur\nValeur par défaut : FALSE"
          },
          "floor": {
            "type": "integer",
            "description": "Précise l’étage de l’adresse en question\nValeur par défaut : 0"
          },
          "postalCode": {
            "type": "string",
            "description": "Correspond au code postal associé à l’adresse principale"
          },
          "doorCode": {
            "type": "string",
            "description": "Numéro de porte "
          },
          "city": {
            "type": "string",
            "description": "Intitulé de la ville"
          },
          "district": {
            "type": "string",
            "description": "Intitulé de l’arrondissement"
          },
          "country": {
            "type": "string",
            "enum": [
              "FR",
              "BE"
            ],
            "description": "Correspond au code Pays (ISO 3166-1 alpha-2)"
          },
          "comment": {
            "type": "string",
            "description": "Commentaire libre d’utilisation"
          }
        },
        "required": [
          "addressLine1",
          "postalCode",
          "city",
          "country"
        ],
        "description": "Informations requises pour l'ajout d'une adresse"
      },
      "addressWithoutSensitiveData": {
        "title": "",
        "type": "object",
        "description": "Informations requises pour l'ajout d'une adresse sans digicode",
        "properties": {
          "addressLine1": {
            "type": "string",
            "description": "Adresse complète du lieu principal"
          },
          "addressLine2": {
            "type": "string",
            "description": "Adresse complémentaire du lieu"
          },
          "elevator": {
            "type": "boolean",
            "description": "Indique si l’adresse possède un ascenseur\nValeur par défaut : FALSE"
          },
          "floor": {
            "type": "integer",
            "description": "Précise l’étage de l’adresse en question\nValeur par défaut : 0"
          },
          "postalCode": {
            "type": "string",
            "description": "Correspond au code postal associé à l’adresse principale"
          },
          "city": {
            "type": "string",
            "description": "Intitulé de la ville"
          },
          "district": {
            "type": "string",
            "description": "Intitulé de l’arrondissement"
          },
          "country": {
            "type": "string",
            "enum": [
              "FR",
              "BE"
            ],
            "description": "Correspond au code Pays (ISO 3166-1 alpha-2)"
          },
          "pickupPointId": {
            "type": "string",
            "description": "Commentaire libre d’utilisation"
          }
        },
        "required": [
          "addressLine1",
          "postalCode",
          "city",
          "country"
        ]
      },
      "interval": {
        "required": [
          "start",
          "end"
        ],
        "properties": {
          "start": {
            "type": "string",
            "format": "datetime"
          },
          "end": {
            "type": "string",
            "format": "datetime"
          }
        }
      },
      "contact": {
        "description": "Informations personnelles sur le contact de livraison et/ou de prélèvement",
        "type": "object",
        "properties": {
          "firstName": {
            "type": "string",
            "description": "Correspond au prénom du client final"
          },
          "lastName": {
            "type": "string",
            "description": "Correspond au nom de famille du client final"
          },
          "phone": {
            "type": "string",
            "description": "Correspond au numéro de téléphone du client final"
          },
          "email": {
            "type": "string",
            "description": "Correspond à l’email du client final"
          }
        },
        "required": [
          "firstName",
          "lastName",
          "phone",
          "email"
        ]
      },
      "tags": {
        "type": "array",
        "description": "Permet de définir des \"marqueurs\" sur cette commande",
        "items": {
          "type": "object",
          "required": [
            "key",
            "value"
          ],
          "properties": {
            "key": {
              "type": "string",
              "example": "origin"
            },
            "value": {
              "type": "string",
              "example": "web"
            }
          }
        }
      },
      "contactWithLocalization": {
        "description": "Informations personnelles sur le contact de livraison et/ou de prélèvement",
        "type": "object",
        "properties": {
          "firstName": {
            "type": "string",
            "description": "Correspond au prénom du client final"
          },
          "lastName": {
            "type": "string",
            "description": "Correspond au nom de famille du client final"
          },
          "phone": {
            "type": "string",
            "description": "Correspond au numéro de téléphone du client final"
          },
          "email": {
            "type": "string",
            "description": "Correspond à l’email du client final"
          },
          "language": {
            "type": "string",
            "description": "Correspond à la langue du client final"
          },
          "timezone": {
            "type": "string",
            "description": "Correspond au fuseau horaire de livraison du client final"
          }
        },
        "required": [
          "firstName",
          "lastName",
          "phone",
          "email",
          "language",
          "timezone"
        ]
      },
      "services": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/deliveryService"
        }
      },
      "postPackage": {
        "required": [
          "length",
          "width",
          "height",
          "weight",
          "quantity"
        ],
        "properties": {
          "reference": {
            "type": "string"
          },
          "length": {
            "$ref": "#/components/schemas/length"
          },
          "width": {
            "$ref": "#/components/schemas/length"
          },
          "height": {
            "$ref": "#/components/schemas/length"
          },
          "weight": {
            "$ref": "#/components/schemas/mass"
          },
          "products": {
            "type": "array",
            "items": {
              "required": [
                "type"
              ],
              "properties": {
                "type": {
                  "$ref": "#/components/schemas/productType"
                },
                "ean": {
                  "type": "string"
                },
                "cug": {
                  "type": "string"
                },
                "label": {
                  "type": "string"
                },
                "quantity": {
                  "type": "integer",
                  "default": 1
                }
              }
            }
          },
          "quantity": {
            "type": "integer"
          }
        }
      },
      "package": {
        "required": [
          "length",
          "width",
          "height",
          "weight",
          "quantity"
        ],
        "properties": {
          "length": {
            "$ref": "#/components/schemas/length"
          },
          "width": {
            "$ref": "#/components/schemas/length"
          },
          "height": {
            "$ref": "#/components/schemas/length"
          },
          "weight": {
            "$ref": "#/components/schemas/mass"
          },
          "products": {
            "type": "array",
            "items": {
              "required": [
                "type"
              ],
              "properties": {
                "type": {
                  "$ref": "#/components/schemas/productType"
                },
                "ean": {
                  "type": "string"
                },
                "cug": {
                  "type": "string"
                },
                "label": {
                  "type": "string"
                },
                "quantity": {
                  "type": "integer",
                  "default": 1
                }
              }
            }
          },
          "quantity": {
            "type": "integer"
          }
        }
      },
      "quote": {
        "properties": {
          "quoteId": {
            "type": "string"
          },
          "price": {
            "$ref": "#/components/schemas/price"
          },
          "vehicleType": {
            "$ref": "#/components/schemas/vehicleType"
          }
        }
      },
      "notation": {
        "required": [
          "score",
          "comment"
        ],
        "properties": {
          "score": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/score"
            }
          },
          "comment": {
            "type": "string"
          }
        }
      },
      "score": {
        "type": "object",
        "required": [
          "note",
          "type"
        ],
        "properties": {
          "note": {
            "type": "number"
          },
          "type": {
            "type": "string",
            "enum": [
              "SCORE_TYPE_RECOMMENDATION",
              "SCORE_TYPE_SATISFACTION"
            ]
          }
        }
      },
      "length": {
        "required": [
          "value",
          "unit"
        ],
        "properties": {
          "value": {
            "type": "number",
            "format": "float"
          },
          "unit": {
            "$ref": "#/components/schemas/lengthUnit"
          }
        }
      },
      "mass": {
        "required": [
          "value",
          "unit"
        ],
        "properties": {
          "value": {
            "type": "number",
            "format": "float"
          },
          "unit": {
            "$ref": "#/components/schemas/massUnit"
          }
        }
      },
      "retailer": {
        "required": [
          "name",
          "id",
          "store"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "store": {
            "required": [
              "id",
              "name",
              "contact"
            ],
            "properties": {
              "id": {
                "type": "string"
              },
              "name": {
                "type": "string"
              },
              "contact": {
                "$ref": "#/components/schemas/contact"
              }
            }
          }
        }
      },
      "price": {
        "description": "Correspond au prix de vente du produit. A renseigner si la livraison est effectuée avec le service “SERVICE_INSTALL”",
        "type": "object",
        "properties": {
          "value": {
            "type": "number",
            "format": "float",
            "description": "Nombre entier indicatif du prix",
            "exclusiveMinimum": true,
            "minimum": 0
          },
          "currency": {
            "$ref": "#/components/schemas/currency"
          }
        }
      },
      "refusedReason": {
        "type": "string",
        "enum": [
          "REFUSED_TOO_HEAVY",
          "REFUSED_AVAILABILITY",
          "REFUSED_AREA",
          "REFUSED_TOO_LARGE",
          "REFUSED_TIME_NOT_WORKED",
          "REFUSED_DAY_OFF",
          "REFUSED_EXCEPTION"
        ]
      },
      "cancelledReason": {
        "type": "string",
        "enum": [
          "CANCELLED_CANNOT_SERVICE",
          "CANCELLED_UNKNOWN",
          "CANCELLED_PREPARATION_DELAYED",
          "CANCELLED_BY_CLIENT",
          "CANCELLED_NEW_ADDRESS",
          "CANCELLED_INCOMPLETE"
        ],
        "description": "Liste regroupant l’ensemble des raisons d’annulation possible pour une livraison"
      },
      "deliveryService": {
        "type": "string",
        "enum": [
          "SERVICE_SELECTED_ROOM",
          "SERVICE_FRONT_HOME",
          "SERVICE_UNPACKING",
          "SERVICE_INSTALL",
          "SERVICE_RECOVERY",
          "SERVICE_PICKUP_POINT",
          "SERVICE_REGULAR_FRONT_HOME",
          "SERVICE_SIMPLE_INSTALL",
          "SERVICE_COMPLEX_INSTALL",
          "SERVICE_ASSEMBLY"
        ]
      },
      "vehicleType": {
        "type": "string",
        "enum": [
          "VEHICLE_TYPE_BIKE",
          "VEHICLE_TYPE_SCOOTER",
          "VEHICLE_TYPE_E_SCOOTER",
          "VEHICLE_TYPE_VAN_SMALL",
          "VEHICLE_TYPE_E_VAN_SMALL",
          "VEHICLE_TYPE_VAN_MEDIUM",
          "VEHICLE_TYPE_PEDESTRIAN",
          "VEHICLE_TYPE_TRUCK",
          "VEHICLE_TYPE_VAN_BIG",
          "VEHICLE_TYPE_E_VAN_BIG",
          "VEHICLE_TYPE_BIKE_CARGO",
          "VEHICLE_TYPE_CAR",
          "VEHICLE_TYPE_E_CAR"
        ]
      },
      "productType": {
        "type": "string",
        "enum": [
          "TYPOLOGY_GENERIC",
          "TYPOLOGY_GROCERY",
          "TYPOLOGY_FRESH",
          "TYPOLOGY_FROZEN",
          "TYPOLOGY_DANGEROUS",
          "TYPOLOGY_HOUSEHOLD",
          "TYPOLOGY_VOLUMINOUS",
          "TYPOLOGY_FRAGILE",
          "TYPOLOGY_VOLUMINOUS_FRAGILE",
          "TYPOLOGY_LARGE_HOUSEHOLD",
          "TYPOLOGY_PALLET_GENERIC",
          "TYPOLOGY_NON_STANDARD"
        ]
      },
      "currency": {
        "type": "string",
        "enum": [
          "EUR"
        ],
        "description": "Liste de la monnaie utilisable"
      },
      "lengthUnit": {
        "type": "string",
        "enum": [
          "mm",
          "cm",
          "m",
          "in",
          "ft-us",
          "ft",
          "mi"
        ]
      },
      "massUnit": {
        "type": "string",
        "enum": [
          "mcg",
          "mg",
          "g",
          "kg",
          "oz",
          "lb",
          "mt",
          "t"
        ]
      },
      "withoutContact": {
        "required": [
          "address",
          "interval"
        ],
        "properties": {
          "address": {
            "$ref": "#/components/schemas/addressWithoutSensitiveData"
          },
          "infos": {
            "type": "string"
          },
          "interval": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/interval"
            }
          }
        }
      },
      "withContact": {
        "required": [
          "address",
          "interval",
          "contact"
        ],
        "properties": {
          "address": {
            "$ref": "#/components/schemas/address"
          },
          "infos": {
            "type": "string"
          },
          "interval": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/interval"
            }
          },
          "contact": {
            "$ref": "#/components/schemas/contact"
          }
        },
        "allOf": [
          {
            "$ref": "#/components/schemas/withoutContact"
          },
          {
            "required": [
              "contact"
            ],
            "properties": {
              "contact": {
                "$ref": "#/components/schemas/contact"
              }
            }
          }
        ]
      },
      "withContactAndLocalization": {
        "allOf": [
          {
            "$ref": "#/components/schemas/withoutContact"
          },
          {
            "required": [
              "contact"
            ],
            "properties": {
              "contact": {
                "$ref": "#/components/schemas/contactWithLocalization"
              }
            }
          }
        ]
      },
      "postQuote": {
        "allOf": [
          {
            "$ref": "#/components/schemas/deliveryInformations"
          },
          {
            "required": [
              "picking",
              "delivery"
            ],
            "properties": {
              "picking": {
                "$ref": "#/components/schemas/withoutContact"
              },
              "delivery": {
                "$ref": "#/components/schemas/withoutContact"
              }
            }
          }
        ],
        "description": "Informations nécessaire à la création d'un devis de livraison"
      },
      "postDelivery": {
        "allOf": [
          {
            "$ref": "#/components/schemas/postDeliveryInformations"
          },
          {
            "required": [
              "quoteId",
              "picking",
              "delivery"
            ],
            "properties": {
              "picking": {
                "$ref": "#/components/schemas/withContact"
              },
              "delivery": {
                "$ref": "#/components/schemas/withContactAndLocalization"
              }
            }
          }
        ]
      },
      "deliveryInformations": {
        "description": "",
        "type": "object",
        "properties": {
          "orderId": {
            "type": "string",
            "description": "Identifiant unique de la commande à renseigner par l'enseigne"
          },
          "referenceNumber": {
            "type": "string",
            "description": "Référence de la commande, numéro associé à un magasin. Pouvant être égal à l’orderId. "
          },
          "productsPrice": {
            "$ref": "#/components/schemas/price"
          },
          "retailer": {
            "$ref": "#/components/schemas/retailer"
          },
          "packages": {
            "type": "array",
            "description": "Unité de manutention propre à l'enseigne. Généralement utilisé comme un l'ensemble des produits de la commande regroupé par colis",
            "items": {
              "$ref": "#/components/schemas/package"
            }
          },
          "services": {
            "$ref": "#/components/schemas/services"
          },
          "tags": {
            "$ref": "#/components/schemas/tags"
          }
        },
        "required": [
          "orderId",
          "referenceNumber",
          "retailer",
          "packages",
          "services"
        ]
      },
      "postDeliveryInformations": {
        "required": [
          "orderId",
          "referenceNumber",
          "retailer",
          "packages",
          "services"
        ],
        "properties": {
          "orderId": {
            "type": "string"
          },
          "referenceNumber": {
            "type": "string"
          },
          "productsPrice": {
            "$ref": "#/components/schemas/price"
          },
          "retailer": {
            "$ref": "#/components/schemas/retailer"
          },
          "packages": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/postPackage"
            }
          },
          "services": {
            "$ref": "#/components/schemas/services"
          },
          "tags": {
            "$ref": "#/components/schemas/tags"
          }
        }
      },
      "deliveryCreated": {
        "type": "object",
        "properties": {
          "deliveryId": {
            "type": "string",
            "description": "Identifiant unique de la livraison"
          }
        },
        "description": "Informations reçues à la création d'une livraison"
      },
      "deliveryCreatedReference": {
        "properties": {
          "deliveryId": {
            "type": "string"
          },
          "externalReference": {
            "type": "string"
          }
        }
      },
      "deliveryCreatedPackages": {
        "allOf": [
          {
            "$ref": "#/components/schemas/deliveryCreated"
          },
          {
            "properties": {
              "packages": {
                "type": "array",
                "items": {
                  "properties": {
                    "id": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        ]
      }
    },
    "parameters": {
      "pathQuoteId": {
        "in": "path",
        "required": true,
        "description": "Id de devis",
        "name": "quoteId",
        "schema": {
          "type": "string"
        }
      },
      "pathDeliveryId": {
        "in": "path",
        "required": true,
        "name": "deliveryId",
        "description": "Id de livraison",
        "schema": {
          "type": "string"
        }
      }
    },
    "securitySchemes": {}
  },
  "servers": [
    {
      "url": "",
      "description": ""
    }
  ],
  "tags": [
    {
      "name": "Livraison"
    },
    {
      "name": "Devis"
    }
  ]
}